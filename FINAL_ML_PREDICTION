#include "Enes100.h"

void setup() {
    // Initialize Enes100 Library:

    // Team Name, Mission Type, Marker ID, Room Number, Wifi Module TX Pin, Wifi Module RX Pin
    Enes100.begin("BATMAN", SEED, 534, 1116, 13, 12);

    /*
     * For ML, make sure you upload your model to the ENES100 website before running
     * your Arduino script. Additionally, make sure your team name matches EXACTLY to the
     * team name you submitted on the website
     */

    // At this point we know we are connected.
    Enes100.println("BATMAN BEGINS...");

}

void loop() {

    Enes100.println("Batman requests prediction...");

    unsigned long t0 = millis();

    // How you get the prediction from your model given the camera image.
    //                              Model Index
    //                                   |
    //                                   v
    int result = Enes100.MLGetPrediction(2);

    unsigned long delta_t = millis() - t0;

    Enes100.println("Batcave: " + String(result) + " has plantable substrate");

    if (result == 0) {
        Enes100.mission(LOCATION, 'A');
    }

    else if (result == 1) {
        Enes100.mission(LOCATION, 'B');
    } 

    else if (result == 2) {
        Enes100.mission(LOCATION, 'C');
    }

    else {
        Enes100.mission(LOCATION, 'D');
    }

    // Enes100.println("The prediction took: " + String(delta_t) + " ms");

    // Wait 5 seconds...
    delay(5000);

}

